#textdomain wesnoth-nrr

[scenario]
    id=02_Ancient_Catacombs
    name= _ "Ancient Catacombs"
    map_file=02_Ancient_Catacombs.map
    {TURNS 100 100 100}
    next_scenario=03_The_Coalition
    victory_when_enemies_defeated=no
    {XP_MODIFIER_NRR}

    {UNDERGROUND}

    # Tallin side
    [side]
        side=1
        controller=human
        {CHARACTER_STATS_TALLIN}
        {FLAG_VARIANT6 ragged}
        team_name="player"
        user_team_name= _ "Adventurer"
        shroud=yes
        fog=yes
        share_vision=all
        {NO_ECONOMY}
        {NO_RECRUITMENT}
    [/side]

    # Masked Dwarves
    [side]
        side=2
        controller=ai
        id="Trithdrol"
        name= _ "Trithdrol"
        type="Dwarvish Masked Sentinel"
        {KARRAG_LOYALISTS}
        {FLAG_VARIANT knalgan}
        canrecruit=yes
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_HEALTHY}
        [/modifications]
        team_name=masked_dwarves,fungus1
        user_team_name= _ "Masked Dwarves"
        {HIDDEN_TEAM}
        {GOLD 120 150 220}
        {INCOME 4 8 12}
        village_gold=0
        recruit="Dwarvish Masked Fighter, Dwarvish Masked Thunderer, Dwarvish Masked Guardsman, Dwarvish Masked Ulfserker, Dwarvish Masked Stalwart, Dwarvish Masked Steelclad"

        {NEUTRAL_AI_PARAMS}
        [ai]
            passive_leader=yes
        [/ai]
    [/side]

    {STARTING_VILLAGES 2 12}

    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Dwarvish Masked Stalwart" {ON_DIFFICULTY 1 1 2}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Dwarvish Masked Steelclad" {ON_DIFFICULTY 1 1 2}}

    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Dwarvish Masked Ulfserker" {ON_DIFFICULTY 2 2 3}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Dwarvish Masked Guardsman" {ON_DIFFICULTY 2 3 3}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Dwarvish Masked Thunderer" {ON_DIFFICULTY 2 3 4}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Dwarvish Masked Fighter" {ON_DIFFICULTY 2 3 5}}

    # Trolls
    [side]
        side=3
        controller=ai
        id="Grumph"
        name= _ "Grumph"
        type="Great Troll"
        color=orange
        {FLAG_VARIANT6 ragged}
        canrecruit=yes
        [modifications]
            {TRAIT_RESILIENT}
            {TRAIT_FEARLESS}
        [/modifications]
        team_name=trolls,fungus2
        user_team_name= _ "Trolls"
        {HIDDEN_TEAM}
        {GOLD 120 150 220}
        {INCOME 4 8 12}
        village_gold=0
        recruit="Troll, Troll Whelp, Troll Rocklobber, Troll Shaman, Troll Hero"

        {CHAOTIC_AI_PARAMS}
    [/side]

    {STARTING_VILLAGES 3 8}

    {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Troll Hero" 1}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Troll Shaman" {ON_DIFFICULTY 1 1 2}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Troll Rocklobber" {ON_DIFFICULTY 1 2 2}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Troll" {ON_DIFFICULTY 2 3 3}}

    {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Troll Whelp" {ON_DIFFICULTY 4 4 6}}

    # Saurians
    [side]
        side=4
        controller=ai
        id="Lazki"
        name= _ "Lazki"
        type="Saurian Javelineer"
        color=white
        {FLAG_VARIANT6 ragged}
        canrecruit=yes
        [modifications]
            {TRAIT_RESILIENT}
            {TRAIT_QUICK}
        [/modifications]
        team_name=saurians,fungus3
        user_team_name= _ "Saurians"
        {HIDDEN_TEAM}
        {GOLD 120 150 220}
        {INCOME 4 8 12}
        village_gold=0
        recruit="Saurian Skirmisher, Saurian Augur, Saurian Ambusher, Saurian Spearthrower, Saurian Oracle, Saurian Soothsayer"

        {CHAOTIC_AI_PARAMS}
        [ai]
            [micro_ai]
                side=4
                ai_type=healer_support
                action=add
                [filter]
                    type="Saurian Soothsayer"
                [/filter]
                aggression=0
            [/micro_ai]
        [/ai]
    [/side]

    {STARTING_VILLAGES 4 8}

    {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Saurian Ambusher" {ON_DIFFICULTY 3 3 4}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Saurian Spearthrower" {ON_DIFFICULTY 2 3 3}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Saurian Oracle" {ON_DIFFICULTY 2 3 3}}
    # limit healer
    {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Saurian Soothsayer" {ON_DIFFICULTY 2 2 2}}

    {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Saurian Augur" {ON_DIFFICULTY 3 5 6}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Saurian Skirmisher" {ON_DIFFICULTY 3 5 5}}

    # Four Monster Sides
    # Each has distinct micro AIs
    # regulating different fauna found here
    # Monster Side
    [side]
        side=5
        controller=ai
        team_name=monsters,fungus4
        user_team_name= _ "Monsters"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        # unreachable leader
        id="Earth_Daemon"
        generate_name=yes
        type="Greater Earth Daemon"
        canrecruit=yes
        {GOLD 40 60 100}
        {INCOME 8 12 16}
        recruit="Cave Wyrm, Cave Wyrmlet"
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Cave Wyrm" {ON_DIFFICULTY 1 2 2}}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Cave Wyrmlet" {ON_DIFFICULTY 2 3 4}}

    # Monster Side
    [side]
        side=6
        controller=ai
        team_name=monsters,fungus
        user_team_name= _ "Monsters"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        no_leader=yes
        {NO_ECONOMY}
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    # Monster Side
    [side]
        side=7
        controller=ai
        team_name=monsters,fungus
        user_team_name= _ "Monsters"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        no_leader=yes
        {NO_ECONOMY}
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    # Monster Side
    [side]
        side=8
        controller=ai
        team_name=monsters,fungus4
        user_team_name= _ "Monsters"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        no_leader=yes
        {NO_ECONOMY}
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    # Clockwork Side
    [side]
        side=9
        controller=ai
        team_name=clockwork
        user_team_name= _ "Clockwork"
        {HIDDEN_TEAM}
        {FLAG_VARIANT knalgan}
        {KARRAG_LOYALISTS}
        no_leader=yes
        {NO_ECONOMY}
        {NEUTRAL_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]

        # place boss unit
        [unit]
            x,y=16,4
            side=9
            {IS_HERO}
            type="Clockwork Berserker"
            # not supposed to be killed
            hitpoints=300
            max_hitpoints=300
        [/unit]
    [/side]

    # Giant Fungus Side
    [side]
        side=10
        controller=ai
        team_name=monsters,fungus1,fungus2,fungus3,fungus4
        user_team_name= _ "Fungus"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        no_leader=yes
        {NO_ECONOMY}
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    # More Monster Side
    # mostly for the big animals here
    [side]
        side=11
        controller=ai
        team_name=monsters,fungus
        user_team_name= _ "Monsters"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        no_leader=yes
        {NO_ECONOMY}
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    # Lurker MAI specific Saurian side
    [side]
        side=12
        controller=ai
        team_name=monsters,fungus
        user_team_name= _ "Lizard Lurkers"
        {HIDDEN_TEAM}
        {FLAG_VARIANT6 ragged}
        {MONSTER_SIDE}
        no_leader=yes
        {NO_ECONOMY}
        {CHAOTIC_AI_PARAMS}
        [ai]
            village_value=0
            [avoid]
                terrain=*^V*
            [/avoid]
        [/ai]
    [/side]

    
    # Setting: catacombs
    # Tallin and Zorfu explore, discover an ancient grimoire and masked dwarves as well as a steam powered automaton they are forced to flee

    [event]
        name=prestart

        # define "outside"
        [store_locations]
            x=33-45
            y=61-67
            terrain=Mm^Xm,Hh*^*,Mm,G*^*
            variable=surface_hexes
        [/store_locations]

        [time_area]
            find_in=surface_hexes
            {DEFAULT_SCHEDULE}
        [/time_area]

        {CLEAR_VARIABLE surface_hexes}

        # make atmosphere omnious
        {COLOR_ADJUST -25 -20 -10}

        # give Tallin weapons
        [transform_unit]
            id=Tallin
            transform_to=Footpad
        [/transform_unit]

        # recall Tallin's party
        {RECALL_LOYALS}

        # make enemies fight in a single area
        [micro_ai]
            side=2
            ai_type=zone_guardian
            action=add

            [filter]
                side=2
                canrecruit=no
            [/filter]
            [filter_location]
                x = 18-36
                y = 18-27
                terrain=U*^*
            [/filter_location]
        [/micro_ai]
        [micro_ai]
            side=3
            ai_type=zone_guardian
            action=add

            [filter]
                side=3
                canrecruit=no
            [/filter]
            [filter_location]
                x = 18-36
                y = 18-27
                terrain=U*^*
            [/filter_location]
        [/micro_ai]
        [micro_ai]
            side=4
            ai_type=zone_guardian
            action=add

            [filter]
                side=4
                canrecruit=no
            [/filter]
            [filter_location]
                x = 18-36
                y = 18-27
                terrain=U*^*
            [/filter_location]
        [/micro_ai]

        # scenario progress variable
        {VARIABLE S02_progression "stageOne"}
        # StageOne - Explore
        # StageTwo - Dart into the Lab
        # StageThree - Look Around the Lab
        # StageFour - Tallin takes Grimoire
        # StageFive - Escape

        # objectives
        [objectives]
            side=1
            silent=no
            [objective]
                description= _ "Explore deeper into the Catacombs"
                condition="win"
                [show_if]
                    {VARIABLE_CONDITIONAL S02_progression equals "stageOne"}
                [/show_if]
            [/objective]
            [objective]
                description= _ "Evade the Combatants"
                condition="win"
                [show_if]
                    {VARIABLE_CONDITIONAL S02_progression equals "stageTwo"}
                [/show_if]
            [/objective]
            [objective]
                description= _ "Look Around the abandoned lab"
                condition="win"
                [show_if]
                    {VARIABLE_CONDITIONAL S02_progression equals "stageTwo"}
                [/show_if]
            [/objective]
            [objective]
                description= _ "Tallin takes the Grimoire"
                condition="win"
                [show_if]
                    {VARIABLE_CONDITIONAL S02_progression equals "stageFour"}
                [/show_if]
            [/objective]
            [objective]
                description= _ "Escape with Tallin and Zorfu"
                condition="win"
                [show_if]
                    {VARIABLE_CONDITIONAL S02_progression equals "stageFive"}
                [/show_if]
            [/objective]
            [objective]
                description= _ "Death of Tallin"
                condition="lose"
            [/objective]
            [objective]
                description= _ "Death of Zorfu"
                condition="lose"
            [/objective]
            [objective]
                description= _ "Death of Withervein Leader"
                condition="lose"
            [/objective]
            {TURNS_RUN_OUT}

            [note]
                description= _ "No recruitment available"
            [/note]
            [note]
                description= _ "Do not bother attacking Shrooms"
            [/note]
        [/objectives]

        # Scatter shrooms
        {SCATTER_UNITS 50 ("Shroom, Elder Shroom, Elder Shroom, Elder Shroom, Ancient Shroom, Ancient Shroom") 3 (
            {EVERYWHERE}
            terrain=*^Tf*

            [not]
                [filter]
                [/filter]
            [/not]

            [not]
                [filter_adjacent_location]
                    [filter]
                    [/filter]
                [/filter_adjacent_location]
            [/not]
        ) (
            side=10
            generate_name=yes
            random_traits=yes
            ai_special=guardian
            upkeep=0
        )}

        # Scatter cave ambushing mobs
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 33 64}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 41 60}

        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 11 64}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 20 52}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon"  2 61}

        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon"  4 64}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon"  4 62}

        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon"  2 51}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon"  9 52}

        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 11 46}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon"  5 35}
        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 12 39}

        {RANDOM_SPAWN 8 "Giant Scorpling,Giant Scorpion,Lesser Earth Daemon,Earth Daemon" 21 33}

        # Tentacles of the Deep
        {GENERIC_UNIT 7 "Tentacle of the Deep"  9 33}{GUARDIAN}
        {GENERIC_UNIT 7 "Tentacle of the Deep" 11 33}{GUARDIAN}
        {GENERIC_UNIT 7 "Tentacle of the Deep" 12 37}{GUARDIAN}
        {GENERIC_UNIT 7 "Tentacle of the Deep" 13 36}{GUARDIAN}

        # water serpent
        {GENERIC_UNIT 7 "Water Serpent"  4 39}{GUARDIAN}

        # mudcrawlers
        {GENERIC_UNIT 7 "Giant Mudcrawler" 3 44}{GUARDIAN}
        {GENERIC_UNIT 7 "Giant Mudcrawler" 6 44}{GUARDIAN}

        {GENERIC_UNIT 7 "Mudcrawler" 5 46}{GUARDIAN}
        {GENERIC_UNIT 7 "Mudcrawler" 4 47}{GUARDIAN}

        {GENERIC_UNIT 7 "Mudcrawler" 5 49}{GUARDIAN}

        # big monster - trapped behind door
        {RANDOM_SPAWN 11 "Greater Earth Daemon, Greater Earth Daemon, Giant Spider, Cave Bear, Cave Bear" 23 14}
        {RANDOM_SPAWN 11 "Greater Earth Daemon, Greater Earth Daemon, Giant Spider, Cave Bear, Cave Bear" 25 15}
        {RANDOM_SPAWN 11 "Greater Earth Daemon, Greater Earth Daemon, Giant Spider, Cave Bear, Cave Bear" 24 16}

        # Mr Bear
        [unit]
            side=11
            id=Bear
            name= _ "Big Boi"
            type="Cave Bear"
            x,y=16,53
            {PASSABLE_CHECK}
            {IS_HERO}
            [modifications]
                {TRAIT_HEALTHY}
                {TRAIT_STRONG}
            [/modifications]
        [/unit]

        [micro_ai]
            side=11
            ai_type=big_animals
            action=add

            [filter]
                id=Bear
            [/filter]
            [avoid_unit]
                type=Giant Spider
            [/avoid_unit]
            [filter_location]
                x= 9-17
                y=52-55
            [/filter_location]
        [/micro_ai]

        # Wolves
        {GENERIC_UNIT 6 "Great Wolf" 36 49}
        {GENERIC_UNIT 6 "Wolf" 35 51}

        {GENERIC_UNIT 6 "Wolf" 38 55}
        {GENERIC_UNIT 6 "Wolf" 40 56}

        {GENERIC_UNIT 6 "Wolf" 34 50}

        [micro_ai]
            side=6
            ai_type=zone_guardian
            action=add

            [filter]
                side=6
                canrecruit=no
                type=Wolf,Great Wolf
            [/filter]
            [filter_location]
                x,y=35-40,48-57
            [/filter_location]
        [/micro_ai]

        # Fire Guardian Chambers

        # Chamber 1
        {GENERIC_UNIT 6 "Fire Guardian" 17 62}
        {GENERIC_UNIT 6 "Fire Guardian" 24 63}
        {GENERIC_UNIT 6 "Fire Guardian" 21 61}

        {GENERIC_UNIT 6 "Fire Wraith" 29 63}

        # Chamber 2
        {GENERIC_UNIT 6 "Fire Guardian" 16 40}
        {GENERIC_UNIT 6 "Fire Guardian" 21 37}
        {GENERIC_UNIT 6 "Fire Wraith" 24 39}
        {GENERIC_UNIT 6 "Fire Guardian" 26 36}

        [micro_ai]
            side=6
            ai_type=zone_guardian
            action=add

            [filter]
                side=6
                canrecruit=no
                type=Fire Guardian,Fire Wraith
            [/filter]
            [filter_location]
                x=17-29,16-26
                y=58-64,36-41
            [/filter_location]
        [/micro_ai]

        # Lurkers
        {GENERIC_UNIT 12 "Saurian Skirmisher"  7 50}
        {GENERIC_UNIT 12 "Saurian Skirmisher" 13 49}
        {GENERIC_UNIT 12 "Saurian Skirmisher" 19 49}
        {GENERIC_UNIT 12 "Saurian Skirmisher"  7 50}
        {GENERIC_UNIT 12 "Saurian Skirmisher" 24 51}
        {GENERIC_UNIT 12 "Saurian Augur" 29 52}

        [micro_ai]
            side=12
            ai_type=lurkers
            action=add

            [filter]
                type=Saurian Skirmisher,Saurian Augur
            [/filter]
            [filter_location]
                terrain=S*
            [/filter_location]
            [filter_location_wander]
                terrain=S*
            [/filter_location_wander]
        [/micro_ai]

        # sprinkle map with weak units
        {SCATTER_UNITS {ON_DIFFICULTY 18 22 26} ("Giant Rat, Giant Rat, Giant Ant, Giant Ant, Giant Ant, Fire Ant") 3 (
            x= 2-26
            y=31-57
            terrain=Uu

            [not]
                [filter]
                [/filter]
            [/not]

            [not]
                [filter_adjacent_location]
                    [filter]
                    [/filter]
                [/filter_adjacent_location]
            [/not]
        ) (
            side=8
            generate_name=yes
            random_traits=yes
        )}

        # micro AI to regulate this units
        # They should not attack you
        # but rather run away
        [micro_ai]
            side=8
            ai_type=coward
            action=add

            [filter]
                type=Giant Rat,Giant Ant,Fire Ant
            [/filter]
            distance=5
        [/micro_ai]

        # tunnel for wyrms
        [tunnel]
            [filter]
                side=5
                canrecruit=no
            [/filter]
            [source]
                x=26,28
                y=39,41
            [/source]
            [target]
                x=22, 6, 7, 1
                y=46,32,56,55
            [/target]
            bidirectional=no
        [/tunnel]

        # micro AI for wyrms
        [micro_ai]
            side=5
            ai_type=zone_guardian
            action=add

            [filter]
                side=5
                canrecruit=no
                type=Cave Wyrm,Cave Wyrmlet
            [/filter]
            [filter_location]
                x= 1-30
                y=32-53 
            [/filter_location]
        [/micro_ai]
    [/event]

    # traps
    {COLLAPSE_WALL_TRAP_EVENT 39 61 40 60}
    {COLLAPSE_WALL_TRAP_EVENT 35 62 34 62}

    {COLLAPSE_WALL_TRAP_EVENT 10 61 11 62}
    {COLLAPSE_WALL_TRAP_EVENT  4 59  3 60}

    {COLLAPSE_WALL_TRAP_EVENT  2 61  3 62}
    {COLLAPSE_WALL_TRAP_EVENT  4 52  3 52}
    {COLLAPSE_WALL_TRAP_EVENT  7 52  8 51}

    {COLLAPSE_WALL_TRAP_EVENT 11 48 10 47}
    {COLLAPSE_WALL_TRAP_EVENT 11 50 10 50}
    {COLLAPSE_WALL_TRAP_EVENT 22 51 21 52}

    {COLLAPSE_WALL_TRAP_EVENT 12 44 11 45}
    {COLLAPSE_WALL_TRAP_EVENT 11 41 12 40}
    {COLLAPSE_WALL_TRAP_EVENT 11 38 12 38}

    {COLLAPSE_WALL_TRAP_EVENT  7 36  6 35}

    {COLLAPSE_WALL_TRAP_EVENT 18 34 19 34}
    {COLLAPSE_WALL_TRAP_EVENT 23 34 22 34}

    # event for goblin apprecation
    [event]
        name="last breath"
        first_time_only=no
        [filter]
            type=Wolf
        [/filter]
        [filter_second]
            type="Goblin Spearman"
        [/filter_second]

        [transform_unit]
            id=$second_unit
            type="Wolf Rider"
        [/transform_unit]           
    [/event]

    [event]
        name="last breath"
        first_time_only=yes
        [filter]
            type=Great Wolf
        [/filter]
        [filter_second]
            type="Goblin Spearman"
        [/filter_second]

        # make Gruk say something about this big wolf
        # being too wild to be mounted         
    [/event]

    [event]
        name="last breath"
        first_time_only=yes
        [filter]
            type=Wolf
        [/filter]
        [filter_second]
            type="Goblin Spearman"
        [/filter_second]

        # some dialogue by orcs to goblins
        # to mount the wolf and not kill it      
    [/event]

    # Death event for clan withervein's last leader
    [event]
        name=last breath
        first_time_only=yes
        [filter]
            id="Gruk"
        [/filter]

        # some dialogue here
    [/event]

    [event]
        name=die
        first_time_only=yes
        [filter]
            id="Gruk"
        [/filter]
        {ENDLEVEL_DEFEAT}
    [/event]

    {TALLIN_DEATH_EVENT}
    {ZORFU_DEATH_EVENT}
[/scenario]
